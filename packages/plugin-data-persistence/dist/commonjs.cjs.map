{"version":3,"sources":["../src/commonjs.cts"],"sourcesContent":["import  {\n  persist as esmPersist,\n  restore as esmRestore,\n  persistToFile as esmPersistToFile,\n  restoreFromFile as esmRestoreFromFile\n} from './index.js'\n\nexport interface OramaPluginDataPersistenceExport {\n  persist: typeof esmPersist\n  restore: typeof esmRestore\n}\n\nexport type RequireCallback = (err: Error | undefined, orama?: OramaPluginDataPersistenceExport) => void\n\nlet _esmRestore: typeof esmRestore\nlet _esmPersist: typeof esmPersist\nlet _esmRestoreFromFile: typeof esmRestoreFromFile\nlet _esmPersistToFile: typeof esmPersistToFile\n\n_esmRestore = esmRestore\n_esmPersist = esmPersist\n_esmRestoreFromFile = esmRestoreFromFile\n_esmPersistToFile = esmPersistToFile\n\nexport async function persist(...args: Parameters<typeof esmPersist>): ReturnType<typeof esmPersist> {\n  if (!_esmPersist) {\n    const imported = await import('./index.js')\n    _esmPersist = imported.persist\n  }\n\n  return _esmPersist(...args)\n}\n\nexport async function restore(...args: Parameters<typeof esmRestore>): ReturnType<typeof esmRestore> {\n  if (!_esmRestore) {\n    const imported = await import('./index.js')\n    _esmRestore = imported.restore\n  }\n\n  return _esmRestore(...args)\n}\n\nexport function persistToFile(...args: Parameters<typeof esmPersistToFile>): ReturnType<typeof esmPersistToFile> {\n  if (!_esmPersistToFile) {\n    const imported = require('./index.js')\n    _esmPersistToFile = imported.persistToFile\n  }\n\n  return _esmPersistToFile(...args)\n}\n\nexport function restoreFromFile(...args: Parameters<typeof esmRestoreFromFile>): ReturnType<typeof esmRestoreFromFile> {\n  if (!_esmRestoreFromFile) {\n    const imported = require('./index.js')\n    _esmRestoreFromFile = imported.restoreFromFile\n  }\n  return _esmRestoreFromFile(...args)\n}\n\nexport function requireOramaPluginDataPersistence(callback: RequireCallback): void {\n  import('./index.js')\n    .then((loaded: OramaPluginDataPersistenceExport) => setTimeout(() => callback(undefined, loaded), 1))\n    .catch((error: Error) => setTimeout(() => callback(error), 1))\n}\n"],"names":["persist","restore","persistToFile","restoreFromFile","requireOramaPluginDataPersistence","_esmRestore","_esmPersist","_esmRestoreFromFile","_esmPersistToFile","esmRestore","esmPersist","esmRestoreFromFile","esmPersistToFile","args","imported","require","callback","then","loaded","setTimeout","undefined","catch","error"],"mappings":";;;;;;;;;;;IAwBsBA,OAAO,MAAPA;IASAC,OAAO,MAAPA;IASNC,aAAa,MAAbA;IASAC,eAAe,MAAfA;IAQAC,iCAAiC,MAAjCA;;yBAtDT;AASP,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AACJ,IAAIC;AAEJH,cAAcI,gBAAU;AACxBH,cAAcI,gBAAU;AACxBH,sBAAsBI,wBAAkB;AACxCH,oBAAoBI,sBAAgB;AAE7B,eAAeZ,QAAQ,GAAGa,IAAmC,EAAiC;IACnG,IAAI,CAACP,aAAa;QAChB,MAAMQ,WAAW,MAAM,MAAM,CAAC;QAC9BR,cAAcQ,SAASd,OAAO;IAChC,CAAC;IAED,OAAOM,eAAeO;AACxB;AAEO,eAAeZ,QAAQ,GAAGY,IAAmC,EAAiC;IACnG,IAAI,CAACR,aAAa;QAChB,MAAMS,WAAW,MAAM,MAAM,CAAC;QAC9BT,cAAcS,SAASb,OAAO;IAChC,CAAC;IAED,OAAOI,eAAeQ;AACxB;AAEO,SAASX,cAAc,GAAGW,IAAyC,EAAuC;IAC/G,IAAI,CAACL,mBAAmB;QACtB,MAAMM,WAAWC,QAAQ;QACzBP,oBAAoBM,SAASZ,aAAa;IAC5C,CAAC;IAED,OAAOM,qBAAqBK;AAC9B;AAEO,SAASV,gBAAgB,GAAGU,IAA2C,EAAyC;IACrH,IAAI,CAACN,qBAAqB;QACxB,MAAMO,WAAWC,QAAQ;QACzBR,sBAAsBO,SAASX,eAAe;IAChD,CAAC;IACD,OAAOI,uBAAuBM;AAChC;AAEO,SAAST,kCAAkCY,QAAyB,EAAQ;IACjF,MAAM,CAAC,cACJC,IAAI,CAAC,CAACC,SAA6CC,WAAW,IAAMH,SAASI,WAAWF,SAAS,IACjGG,KAAK,CAAC,CAACC,QAAiBH,WAAW,IAAMH,SAASM,QAAQ;AAC/D"}