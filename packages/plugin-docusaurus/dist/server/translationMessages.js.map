{"version":3,"sources":["../../src/server/translationMessages.ts"],"sourcesContent":["import type { LoadContext } from '@docusaurus/types'\nimport fs from 'fs'\nimport path from 'path'\nimport { fileURLToPath } from 'url'\n\nfunction codeTranslationLocalesToTry(locale: string): string[] {\n  const intlLocale = new Intl.Locale(locale)\n  const maximizedLocale = intlLocale.maximize()\n  return [\n    locale,\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    `${maximizedLocale.language}-${maximizedLocale.region!}`,\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    `${maximizedLocale.language}-${maximizedLocale.script!}`,\n    maximizedLocale.language\n  ]\n}\n\nasync function retrieveObjectContent(filePath: string): Promise<object> {\n  const fileContent = await fs.promises.readFile(filePath, 'utf8')\n  return JSON.parse(fileContent)\n}\n\nexport async function retrieveTranslationMessages(docusaurusContext: LoadContext): Promise<Record<string, string>> {\n  const translationsDir = fileURLToPath(new URL('../translationMessages', import.meta.url))\n  const localesToTry = codeTranslationLocalesToTry(docusaurusContext.i18n.currentLocale)\n\n  const existingLocalePath = localesToTry\n    .map(locale => path.join(translationsDir, `${locale}.json`))\n    .find(fs.existsSync)\n\n  return existingLocalePath ? retrieveObjectContent(existingLocalePath) : Promise.resolve({})\n}\n"],"names":["fs","path","fileURLToPath","codeTranslationLocalesToTry","locale","intlLocale","Intl","Locale","maximizedLocale","maximize","language","region","script","retrieveObjectContent","filePath","fileContent","promises","readFile","JSON","parse","retrieveTranslationMessages","docusaurusContext","translationsDir","URL","url","localesToTry","i18n","currentLocale","existingLocalePath","map","join","find","existsSync","Promise","resolve"],"mappings":"AACA,OAAOA,QAAQ,KAAI;AACnB,OAAOC,UAAU,OAAM;AACvB,SAASC,aAAa,QAAQ,MAAK;AAEnC,SAASC,4BAA4BC,MAAc,EAAY;IAC7D,MAAMC,aAAa,IAAIC,KAAKC,MAAM,CAACH;IACnC,MAAMI,kBAAkBH,WAAWI,QAAQ;IAC3C,OAAO;QACLL;QACA,oEAAoE;QACpE,CAAC,EAAEI,gBAAgBE,QAAQ,CAAC,CAAC,EAAEF,gBAAgBG,MAAM,CAAE,CAAC;QACxD,oEAAoE;QACpE,CAAC,EAAEH,gBAAgBE,QAAQ,CAAC,CAAC,EAAEF,gBAAgBI,MAAM,CAAE,CAAC;QACxDJ,gBAAgBE,QAAQ;KACzB;AACH;AAEA,eAAeG,sBAAsBC,QAAgB,EAAmB;IACtE,MAAMC,cAAc,MAAMf,GAAGgB,QAAQ,CAACC,QAAQ,CAACH,UAAU;IACzD,OAAOI,KAAKC,KAAK,CAACJ;AACpB;AAEA,OAAO,eAAeK,4BAA4BC,iBAA8B,EAAmC;IACjH,MAAMC,kBAAkBpB,cAAc,IAAIqB,IAAI,0BAA0B,YAAYC,GAAG;IACvF,MAAMC,eAAetB,4BAA4BkB,kBAAkBK,IAAI,CAACC,aAAa;IAErF,MAAMC,qBAAqBH,aACxBI,GAAG,CAACzB,CAAAA,SAAUH,KAAK6B,IAAI,CAACR,iBAAiB,CAAC,EAAElB,OAAO,KAAK,CAAC,GACzD2B,IAAI,CAAC/B,GAAGgC,UAAU;IAErB,OAAOJ,qBAAqBf,sBAAsBe,sBAAsBK,QAAQC,OAAO,CAAC,CAAC,EAAE;AAC7F,CAAC"}